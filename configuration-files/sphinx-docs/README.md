# Adding sphinx docs to your PyPi packages

In order to have proper documentation for our packages, we use [Sphinx](https://www.sphinx-doc.org/en/master/). Here you find the configuration files and its setup.

In the workflow-template for publishing packages [template](https://github.com/repowerednl/.github/blob/main/workflow-templates/test-sphinx-release-pypi.yml), the generation and deployment of the sphinx-docs to `docs.repowered.nl` is already setup for you.

## Initial setup

1. Copy the `docs` folder to the root of your repository.
2. In the `index.md`, on line 1 and 14, add your package name and on line 1 also the generation date.
3. In the `conf.py` file:
   1. alter/add the paths to your source code: `sys.path.insert(0, os.path.abspath(os.path.join("<base>", "<your-code-usually-src>")))`
   2. [Optional] change the author to you
4. In your `.gitignore` add the folders `docs/_autosummary` and `docs/build` that are generated by the `make html` command
5. In your `pyproject.toml`, add the packages that are responsible for creating the docs
    ```toml
    [tool.poetry.group.docs.dependencies]
    myst-parser = "4.0.1"
    autodoc_pydantic = "^2.0.0"
    sphinx = "8.2.1"
    sphinx-book-theme = "1.1.4"
    ```
6. Run `make html` in the `docs` folder to check if it correctly creates the build and auto summary.
7. SSH into the `staging.repowered.nl` machine and update the `index.html` with a reference to your package (or ask someone with access to do this)
   - [ ] Do this step automatically: https://repowerednl.atlassian.net/browse/REP-4116
8. Enable the deployment workflow via the workflow-template via GitHub. Video how --> [Add-pypi-workflow.webm](Add-pypi-workflow.webm)